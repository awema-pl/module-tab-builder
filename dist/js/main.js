/**
 * Bundle of AWEMA tab-builder
 * Generated: 2020-11-09 12:23:12
 * Version: 1.1.0
 */

!function(){"use strict";const e=["tb-tab","tb-link"];function t(e=[],t=[]){return t.length?e.filter(e=>{let n=e.componentOptions?e.componentOptions.tag:e.tag;return t.includes(n)}):e}let n=0;var i=function(e,t,n,i,a,s,r,l,o,d){"boolean"!=typeof r&&(o=l,l=r,r=!1);var c,u="function"==typeof n?n.options:n;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,a&&(u.functional=!0)),i&&(u._scopeId=i),s?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,o(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},u._ssrRegister=c):t&&(c=r?function(){t.call(this,d(this.$root.$options.shadowRoot))}:function(e){t.call(this,l(e))}),c)if(u.functional){var h=u.render;u.render=function(e,t){return c.call(t),h(e,t)}}else{var v=u.beforeCreate;u.beforeCreate=v?[].concat(v,c):[c]}return n};var a=i({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tab-builder"},[n("tab-nav",{attrs:{name:e.name,links:e.links,active:e.active},scopedSlots:e._u([{key:"tab-toggler",fn:function(t){return[e._t("tab-toggler",null,null,t)]}},{key:"tab-hidden",fn:function(t){return[e._t("tab-hidden",null,null,t)]}},{key:"tab-hidden-open",fn:function(t){return[e._t("tab-hidden-open",null,null,t)]}}],null,!0)}),e._v(" "),n("tab-switcher",{attrs:{active:e.activeTab}},[e._t("default")],2)],1)},staticRenderFns:[]},void 0,{name:"tab-builder",props:{name:{type:String,default:()=>"tab-builder-"+n++},active:{type:Number,default:0}},computed:{activeTab(){let e=this.$route.query[this.name];return void 0===e?this.active:+e},links(){return t(this.$slots.default,e).map(e=>({name:e.componentOptions.propsData.label,link:e.componentOptions.propsData.url||null}))}}},void 0,!1,void 0,void 0,void 0);var s=i({},void 0,{name:"tab-switcher",props:{active:{type:Number,default:0}},render(n){return n("div",{staticClass:"tab-switcher"},[n("transition-group",{props:{tag:"div",name:"tab-transition"}},t(this.$slots.default,e).map((e,t)=>n("div",{directives:[{name:"show",rawName:"v-show",value:t==this.active,expression:"i == active"}],staticClass:"tab-switcher__tab",key:t+"child"},e.componentOptions.children)))])}},void 0,void 0,void 0,void 0,void 0);var r=i({render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tab-nav"},[n("div",{ref:"togglers",staticClass:"tab-nav__overflow"},e._l(e.links,function(t,i){return n(t.link?"a":"button",{key:i,tag:"component",staticClass:"tab-nav__toggler",class:{"is-active":i===e.activeTab},style:{visibility:e.hiddenLabels&&e.hiddenLabels.includes(i)?"hidden":"visible"},attrs:{href:t.link},on:{click:function(n){return e.linkClick(n,t,i)}}},[e._t("tab-toggler",[e._v("\n                "+e._s(t.name)+"\n            ")],{item:t,index:i,isActive:i===e.activeTab})],2)}),1),e._v(" "),n("context-menu",{ref:"hiddenToggler",staticClass:"tab-nav__hidden-toggler",class:{"has-active-item":e.hiddenLabels&&e.hiddenLabels.includes(e.activeTab)},style:{visibility:e.hiddenLabels?"visible":"hidden",left:e.hiddenLabels?e.dropdownLeft+"px":null},attrs:{boundary:".tab-nav"}},[n("template",{slot:"toggler"},[e._t(e.togglerLabel,[e._v("\n                "+e._s(e.togglerLabel)+"\n            ")],{name:"tab-hidden-open",items:e.links,hiddenIdx:e.hiddenLabels,activeTab:e.activeTab})],2),e._v(" "),e._l(e.links,function(t,i){return n(t.link?"cm-link":"cm-button",{directives:[{name:"show",rawName:"v-show",value:e.hiddenLabels&&e.hiddenLabels.includes(i),expression:"hiddenLabels && hiddenLabels.includes(i)"}],key:i,tag:"component",class:{"is-active":i===e.activeTab},attrs:{href:t.link},on:{click:function(n){return e.linkClick(n,t,i)}}},[e._t("tab-hidden",[e._v("\n                "+e._s(t.name)+"\n            ")],{item:t,index:i,isActive:i===e.activeTab})],2)})],2)],1)},staticRenderFns:[]},void 0,{name:"tab-nav",props:{name:String,links:{type:Array,required:!0},active:{type:Number,default(){let e=this.links.findIndex(e=>e.active);return e>-1?e:0}}},data(){return{hiddenLabels:null,dropdownLeft:0,current:this.active}},computed:{useRouter(){return void 0!==this.name},activeTab(){let e=this.$route.query[this.name]||this.current;return e&&+e},togglerLabel(){if(!this.hiddenLabels)return"";switch(this.hiddenLabels.length){case this.links.length:return this.links[this.activeTab].label;default:return this.$lang.TABS_HIDDEN_TOGGLER.replace("%s",this.hiddenLabels.length)}}},methods:{linkClick(e,t,n){t.link||(e.preventDefault(),e.stopPropagation(),this.useRouter?this.setRouteParam(n):this.current=n)},setRouteParam(e,t=!0){let n={};n[this.name]=e,this.$router.$setParam(n,t)},calculateHiddenLabels(){let e=10,t=0,n=[],i=this.$refs.hiddenToggler.$el,a=this.$refs.togglers.clientWidth-i.clientWidth,s=Array.from(this.$refs.togglers.children);for(let i=0;i<s.length;i++){let r=s[i].offsetWidth;(e+=r)>a?n.push(i):t+=r}this.dropdownLeft=t,this.hiddenLabels=n.length?n:null},debounceCalculateHiddenLabels(){clearTimeout(this.__resizeTimeout),this.__resizeTimeout=setTimeout(this.calculateHiddenLabels,100)}},mounted(){this.$nextTick(this.calculateHiddenLabels),window.addEventListener("resize",this.debounceCalculateHiddenLabels)},beforeDestroy(){window.removeEventListener("resize",this.debounceCalculateHiddenLabels)}},void 0,!1,void 0,void 0,void 0);var l=i({render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[]},void 0,{name:"tb-tab",props:{label:{type:String}}},void 0,!1,void 0,void 0,void 0);var o=i({render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]},void 0,{name:"tb-link",props:{label:String,url:{type:String,required:!0}}},void 0,!1,void 0,void 0,void 0);var d={installed:!1,install:function(e){this.installed||(this.installed=!0,e.component("tab-builder",a),e.component("tab-nav",r),e.component("tab-switcher",s),e.component("tb-tab",l),e.component("tb-link",o))}},c={TABS_HIDDEN_TOGGLER:"%s other"};const u={install(e){e.lang=c,Vue.use(d)}};window&&"AWEMA"in window?AWEMA.use(u):(window.__awema_plugins_stack__=window.__awema_plugins_stack__||[],window.__awema_plugins_stack__.push(u))}();
